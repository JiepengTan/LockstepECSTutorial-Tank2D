{
  "FileContent": [
    "\nusing Lockstep.Util;                                                                   ",
    "\nusing Lockstep.Serialization;                                                                   ",
    "\nusing Lockstep.Math;                                                                   ",
    "\nusing Lockstep.Game;                                                                   ",
    "\nusing Lockstep.Collision2D;                                                                   ",
    "\nusing System.Text;                                                                         ",
    "\n#if !DONT_USE_GENERATE_CODE                                                                     ",
    "\n//#TYPES_EXTENSIONS                                                                             ",
    "\n#endif                                                                                          ",
    "\n                                                                                              "
  ],
  "TypeHandler": [
    {
      "_defaultCodeTemplete": "{0}writer.Write({1});",
      "_enumCodeTemplete": "{0}writer.Write((int)({1}));",
      "_clsCodeTemplete": "{0}{1}.WriteBackup(writer);",
      "_arrayCodeTemplete": "{0}writer.Write({1});",
      "_lstCodeTemplete": "{0}writer.Write({1});",
      "_dictCodeTemplete": "{0}writer.Write({1});"
    },
    {
      "_defaultCodeTemplete": "{0}{1} = reader.Read{2}();",
      "_enumCodeTemplete": "{0}{1} = ({2})reader.ReadInt32();",
      "_clsCodeTemplete": "{0}{1}.ReadBackup(reader);",
      "_arrayCodeTemplete": "{0}{1} = reader.ReadArray(this.{1});",
      "_lstCodeTemplete": "{0}{1} = reader.ReadList(this.{1});",
      "_dictCodeTemplete": "{0}{1} = reader.ReadDict(this.{1});"
    },
    {
      "_defaultCodeTemplete": "{0}hash += {1}.GetHash(ref idx) * PrimerLUT.GetPrimer(idx++);",
      "_enumCodeTemplete":"{0}hash += ((int){1}) * PrimerLUT.GetPrimer(idx++);",
      "_clsCodeTemplete": "{0}hash += {1}.GetHash(ref idx) * PrimerLUT.GetPrimer(idx++);",
      "_arrayCodeTemplete": "{0}if({1} != null) foreach (var item in {1}) {{if(item != default({2}))hash += item.GetHash(ref idx) * PrimerLUT.GetPrimer(idx++);}}",
      "_lstCodeTemplete": "{0}if({1} != null) foreach (var item in {1}) {{if(item != default({2}))hash += item.GetHash(ref idx) * PrimerLUT.GetPrimer(idx++);}}",
      "_dictCodeTemplete": "{0}hash += ({1} == null ? 0:{1}.Count)  * PrimerLUT.GetPrimer(idx++);"
    },
    {
      "_defaultCodeTemplete": "{0}sb.AppendLine(prefix + \"{1}\"+\":\" + {1}.ToString());",
      "_enumCodeTemplete": "{0}sb.AppendLine(prefix + \"{1}\"+\":\" + {1}.ToString());",
      "_clsCodeTemplete": "{0}sb.AppendLine(prefix + \"{1}\" +\":\");  {1}.DumpStr(sb,\"\\t\" + prefix);",
      "_arrayCodeTemplete": "{0}BackUpUtil.DumpList(\"{1}\", {1}, sb, prefix);",
      "_lstCodeTemplete": "{0}BackUpUtil.DumpList(\"{1}\", {1}, sb, prefix);",
      "_dictCodeTemplete": "{0}sb.AppendLine(prefix + \"{1}\"+\":\" + {1}.ToString());"
    }
  ],
  "ClsCodeTemplate": [
    "\nnamespace #NameSpace{                                                                                              ",
    "\n    public partial class #ClsName :IBackup{                                                                 ",
    "\n       public void WriteBackup(Serializer writer){                                          ",
    "\n#TYPE_HANDLE0                                                                                    ",
    "\n       }                                                                                           ",
    "\n                                                                                                   ",
    "\n       public void ReadBackup(Deserializer reader){                                      ",
    "\n#TYPE_HANDLE1                                                                                    ",
    "\n       }                                                                                           ",
    "\n                                                                                                   ",
    "\n       public int GetHash(ref int idx){                                     ",
    "\n           int hash = 1;                                                                            ",
    "\n#TYPE_HANDLE2                                                                                    ",
    "\n           return hash;                                                                                   ",
    "\n       }                                                                                           ",
    "\n                                                                                                   ",
    "\n       public void DumpStr(StringBuilder sb,string prefix){                                      ",
    "\n#TYPE_HANDLE3                                                                                    ",
    "\n       }                                                                                           ",
    "\n    }                                                              ",
    "\n}                                                              "
  ]
}